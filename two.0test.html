<html>
<head>
<title>Demonstrate WebGLSloth</title>
</head>

<body>
<canvas id="myCanvas" width="1024" height="512" style="border:1px solid #000000;">
</canvas> 
<div id="fps">
hello
</div>
<div id="infodiv">
hello
</div>

<img id="sky" src="abacusbead.PNG"></img><br>

<canvas id="canvas1" width="256" height="256" style="border:1px solid #000000;"></canvas> 
<canvas id="canvas2" width="256" height="256" style="border:1px solid #000000;"></canvas> 
<canvas id="canvas3" width="256" height="256" style="border:1px solid #000000;"></canvas> 
<canvas id="canvas4" width="256" height="256" style="border:1px solid #000000;"></canvas> 
<canvas id="canvas5" width="256" height="256" style="border:1px solid #000000;"></canvas> 
<canvas id="canvas6" width="256" height="256" style="border:1px solid #000000;"></canvas> 
<canvas id="canvas7" width="256" height="256" style="border:1px solid #000000;"></canvas> 
<canvas id="canvas8" width="256" height="256" style="border:1px solid #000000;"></canvas> 
<canvas id="canvas9" width="256" height="256" style="border:1px solid #000000;"></canvas> 

<script src="SlothGL2.0.js"></script>

<script>
canvas = document.getElementById("myCanvas");
var renderer = new SlothGL();
renderer.setup(canvas);


// test canvases
canvas1 = document.getElementById("canvas1");
canvas2 = document.getElementById("canvas2");
canvas3 = document.getElementById("canvas3");
canvas4 = document.getElementById("canvas4");
canvas5 = document.getElementById("canvas5");
canvas6 = document.getElementById("canvas6");
canvas7 = document.getElementById("canvas7");
canvas8 = document.getElementById("canvas8");
canvas9 = document.getElementById("canvas9");

// 2d contexts for the test canvases
ctx1 = canvas1.getContext("2d");
ctx2 = canvas2.getContext("2d");
ctx3 = canvas3.getContext("2d");
ctx4 = canvas4.getContext("2d");
ctx5 = canvas5.getContext("2d");
ctx6 = canvas6.getContext("2d");
ctx7 = canvas7.getContext("2d");
ctx8 = canvas8.getContext("2d");
ctx9 = canvas9.getContext("2d");

// Fill the rectangles
fillRects("red","red", ctx1);
fillRects("green","red", ctx2);
fillRects("blue","red", ctx3);
fillRects("red","green", ctx4);
fillRects("green","green", ctx5);
fillRects("blue","green", ctx6);
fillRects("red","blue", ctx7);
fillRects("green","blue", ctx8);
fillRects("blue","blue", ctx9);



var now, elapsed, then;

function draw(){
	renderer.clear();

	// Use the renderer to draw stuff
	renderer.test(canvas1, 0,0,100);
	renderer.test(canvas2, 100,100,100);
	renderer.test(canvas3, 200,200,100);
	renderer.test(canvas4, 300,300,100);
	renderer.test(canvas5, 400,400,100);
	renderer.test(canvas6, 500,400,100);
	renderer.test(canvas7, 600,400,100);
	renderer.test(canvas8, 700,400,100);
	renderer.test(canvas9, 800,400,100);
};

function animate(){
	// Calculate fps
	now = Date.now();
	elapsed = now - then;
	then = now;
	document.getElementById("fps").innerHTML = "FPS: "+Math.round(1000/elapsed);
	
	// animate
	draw();

	requestAnimationFrame(function(){animate()});
};

animate();


// This function fills rectangles with given alternating color pattern
// Input is the first and then the second color of the rectangles
// ctx is context
function fillRects(first, second, ctx){
	var x = 0; // cursor x
	var y = 0; // cursor y
	width = 20;
	height = 12.8;
	color2 = false;
	ctx.fillStyle = first;
	
	// for each row
	while(y+height <= ctx.canvas.height){
		// for each column
		while(x+width <= ctx.canvas.width){
			// fill rect
			ctx.fillRect(x,y,width,height);
			
			// move x
			x += width;
			
			// Alternate colors
			if(color2 === false){
				ctx.fillStyle = second;
				color2 = true;
			}
			else{
				ctx.fillStyle = first;
				color2 = false;
			}
		}
		// reset x
		x = 0;
		// move y
		y += height;
	}

};

</script>

</body>
</html>
